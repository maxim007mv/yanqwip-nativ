# Yanqwip ‚Äì –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–≥–∏–¥ –ø–æ –≥–æ—Ä–æ–¥—É

üåü **Production-ready –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ React Native (Expo + TypeScript) –¥–ª—è iOS –∏ Android.

## ÔøΩ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: 75% –≥–æ—Ç–æ–≤–æ

```
‚îú‚îÄ ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (100%)
‚îú‚îÄ ‚úÖ –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ (100%)
‚îú‚îÄ ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (100%)
‚îú‚îÄ ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è (100%)
‚îú‚îÄ ‚úÖ HomeScreen (100%)
‚îú‚îÄ ‚úÖ PlacesScreen (100%)
‚îú‚îÄ ‚úÖ AgentScreen (90%)
‚îú‚îÄ ‚úÖ ProfileScreen (100%)
‚îú‚îÄ ‚è≥ WizardScreen (40%)
‚îú‚îÄ ‚è≥ RouteOverviewScreen (40%)
‚îú‚îÄ ‚è≥ RouteDetailsScreen (30%)
‚îú‚îÄ ‚è≥ Auth —ç–∫—Ä–∞–Ω—ã (80%)
‚îú‚îÄ ‚è≥ –ö–∞—Ä—Ç—ã –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è (20%)
‚îú‚îÄ ‚è≥ Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (70%)
‚îî‚îÄ üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (100%)
```

üìã **[–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∑–∞–¥–∞—á](../TODO_DETAILED.md)**

## ÔøΩüì± –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–ò-–∞–≥–µ–Ω—Ç** ‚Äì –±—ã—Å—Ç—Ä—ã–π —á–∞—Ç-–ø–æ–º–æ—â–Ω–∏–∫ —Å streaming-–æ—Ç–≤–µ—Ç–∞–º–∏ (‚â§700ms)
- **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤** ‚Äì –º–∞—Å—Ç–µ—Ä –∏–∑ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö
- **–ö–∞—Ç–∞–ª–æ–≥ –º–µ—Å—Ç** ‚Äì —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–º
- **–ü—Ä–æ—Ñ–∏–ª—å** ‚Äì —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Ç—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
- **–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω** ‚Äì —Å—Ç–µ–∫–ª–æ–º–æ—Ä—Ñ–∏–∑–º, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, –ø–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js ‚â•18
- npm –∏–ª–∏ yarn
- Expo CLI (`npm install -g expo-cli`)
- iOS: Xcode + CocoaPods
- Android: Android Studio + SDK

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd frontend
npm install
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```bash
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
API_URL=http://YOUR_BACKEND_URL:8000
YANDEX_MAPS_KEY=your_actual_yandex_api_key
```

> **–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç:** https://developer.tech.yandex.ru/services/

### –ó–∞–ø—É—Å–∫

```bash
# Development
npm start

# iOS —Å–∏–º—É–ª—è—Ç–æ—Ä
npm run ios

# Android —ç–º—É–ª—è—Ç–æ—Ä
npm run android

# Web (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
npm run web
```

### –°–±–æ—Ä–∫–∞ Production

#### Android (.apk / .aab)

```bash
# Prebuild (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è android/)
npm run prebuild

# Gradle —Å–±–æ—Ä–∫–∞
cd android
./gradlew assembleRelease  # APK
./gradlew bundleRelease    # AAB

# –§–∞–π–ª—ã –≤ android/app/build/outputs/
```

#### iOS (.ipa)

```bash
# Prebuild (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ios/)
npm run prebuild

# Xcode
open ios/yanqwip.xcworkspace

# Archive ‚Üí Distribute ‚Üí App Store / Ad Hoc
```

#### –ß–µ—Ä–µ–∑ EAS Build (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
npm install -g eas-cli
eas login
eas build --platform all
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
frontend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ screens/          # –≠–∫—Ä–∞–Ω—ã (Home, Places, Agent, Profile, Wizard...)
‚îÇ   ‚îú‚îÄ‚îÄ components/       # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (GlassCard, Button...)
‚îÇ   ‚îú‚îÄ‚îÄ navigation/       # React Navigation (Stack + Tabs)
‚îÇ   ‚îú‚îÄ‚îÄ api/              # API –∫–ª–∏–µ–Ω—Ç (axios + –∏–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ store/            # Zustand (auth, UI)
‚îÇ   ‚îú‚îÄ‚îÄ lib/              # Theme, types, utils
‚îÇ   ‚îî‚îÄ‚îÄ assets/           # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã
‚îú‚îÄ‚îÄ App.tsx               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ app.config.js         # Expo –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

### –¶–≤–µ—Ç–∞

```typescript
// Accent (brand)
accent: '#FFB84A'
accent2: '#FFC566'

// Glass morphism
glassBg: 'rgba(255,255,255,0.10)'      // dark mode
glassBorder: 'rgba(255,255,255,0.28)'

// Text
text1: 'rgba(255,255,255,0.98)'
text2: 'rgba(255,255,255,0.82)'
text3: 'rgba(255,255,255,0.60)'
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **GlassCard** ‚Äì —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å blur —ç—Ñ—Ñ–µ–∫—Ç–æ–º
- **Button** ‚Äì –≤–∞—Ä–∏–∞–Ω—Ç—ã: accent / glass / outline
- **TypingIndicator** ‚Äì –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è —á–∞—Ç–∞

### –¢–µ–º—ã

- Light / Dark / Auto (—Å–ª–µ–¥—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è

## ü§ñ –ò–ò-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –ò–ò-–∞–≥–µ–Ω—Ç (AgentScreen)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë—ã—Å—Ç—Ä—ã–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã, —Å–ø—Ä–∞–≤–∫–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:**
- Streaming API (`/agent/chat`)
- Debounce 250ms
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞

**–ü—Ä–æ–º—Ç:**
```
–¢—ã ‚Äî –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫-–≥–∏–¥. 
–û—Ç–≤–µ—á–∞–π –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ú–æ—Å–∫–≤–µ –∏ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç—è–º: 
–≥–¥–µ –ø–æ–µ—Å—Ç—å, –∫—É–¥–∞ —Å—Ö–æ–¥–∏—Ç—å, –∫–∞–∫–∏–µ –∫–∞—Ñ–µ —Ä—è–¥–æ–º, –∫–∞–∫ –¥–æ–µ—Ö–∞—Ç—å –∏ —Ç.–¥. 
–û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, —á—ë—Ç–∫–æ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.
```

**–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** ‚â§700ms –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ (WizardScreen ‚Üí RouteOverviewScreen)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ 10 –≤–æ–ø—Ä–æ—Å–æ–≤.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ú–∞—Å—Ç–µ—Ä –∏–∑ 10 —à–∞–≥–æ–≤ (–±—é–¥–∂–µ—Ç, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–º–ø, –ø–æ–≥–æ–¥–∞ –∏ —Ç.–¥.)
2. –ö–Ω–æ–ø–∫–∞ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç"
3. –ê–Ω–∏–º–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (20-40 —Å–µ–∫)
4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö —Å —Ç–æ—á–∫–∞–º–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–º
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å

**API:**
```typescript
POST /routes/generate
{
  answers: WizardAnswer[],
  context: {
    city: string,
    budget?: string,
    categories?: string[]
  }
}

Response: {
  route: {
    title: string,
    summary: string,
    tags: string[],
    steps: RouteStep[],
    tips: string[],
    totalDuration: number
  }
}
```

**–ö–∞—Ä—Ç–∞:**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `react-native-yamap`
- –ü–æ–ª–∏–ª–∏–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏
- –ú–∞—Ä–∫–µ—Ä—ã —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –¢–∞–ø –Ω–∞ –º–∞—Ä–∫–µ—Ä ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞ —à–∞–≥–∞

## üó∫Ô∏è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install react-native-yamap
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**iOS (ios/Podfile):**
```ruby
pod 'react-native-yamap', path: '../node_modules/react-native-yamap'
```

**Android (android/app/build.gradle):**
```gradle
dependencies {
  implementation project(':react-native-yamap')
}
```

**API –∫–ª—é—á (app.config.js):**
```javascript
plugins: [
  ['react-native-yamap', {
    apiKey: process.env.YANDEX_MAPS_KEY
  }]
]
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { YaMap, Marker, Polyline } from 'react-native-yamap';

<YaMap
  initialRegion={{
    lat: 55.751244,
    lon: 37.618423,
    zoom: 12
  }}
>
  {steps.map(step => (
    <Marker
      key={step.id}
      point={{ lat: step.coordinates.lat, lon: step.coordinates.lon }}
      onPress={() => onMarkerPress(step)}
    />
  ))}
  <Polyline points={routePath} strokeColor="#FFB84A" strokeWidth={4} />
</YaMap>
```

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

- **expo-secure-store** (iOS Keychain / Android Keystore)
- –ù–ï AsyncStorage (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)

### –†–µ—Ñ—Ä–µ—à —Ç–æ–∫–µ–Ω–æ–≤

Axios interceptor –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ 401:

```typescript
// api/client.ts
apiClient.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401 && !originalRequest._retry) {
      const newTokens = await refreshToken();
      originalRequest.headers.Authorization = `Bearer ${newTokens.accessToken}`;
      return apiClient(originalRequest);
    }
  }
);
```

## üìä State Management

### Zustand Stores

**authStore:**
- user, tokens, isAuthenticated
- login(), logout(), loadStoredAuth()

**uiStore:**
- theme, isOnboarded
- setTheme(), toggleTheme()

### React Query

–î–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- `useQuery(['myRoutes'], routesApi.getMyRoutes)`
- `useMutation(routesApi.generate)`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Type check
npm run type-check

# Lint
npm run lint
```

## üì¶ –î–µ–ø–ª–æ–π

### TestFlight (iOS)

1. Archive –≤ Xcode
2. Upload to App Store Connect
3. TestFlight ‚Üí Internal Testing

### Google Play (Android)

1. –°–±–æ—Ä–∫–∞ `.aab`
2. Play Console ‚Üí Internal Testing / Production
3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–ª–∏–∑

### EAS (Expo Application Services)

```bash
eas build --platform all
eas submit --platform ios
eas submit --platform android
```

## üõ†Ô∏è Backend (FastAPI)

–¢—Ä–µ–±—É–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### Auth
- `POST /auth/login` ‚Äì –≤—Ö–æ–¥
- `POST /auth/register` ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/refresh` ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /auth/me` ‚Äì —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### Routes
- `POST /routes/generate` ‚Äì –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ (–¥–æ–ª–≥–∏–π –ø—Ä–æ—Ü–µ—Å—Å)
- `GET /routes/my` ‚Äì –º–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã
- `GET /routes/public` ‚Äì –ø—É–±–ª–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- `POST /routes` ‚Äì —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
- `GET /routes/:id` ‚Äì –¥–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞

### Places
- `GET /places` ‚Äì –≤—Å–µ –º–µ—Å—Ç–∞
- `GET /places/search?q=...` ‚Äì –ø–æ–∏—Å–∫
- `POST /places/:id/favorite` ‚Äì –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

### Agent
- `POST /agent/chat` ‚Äì —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —á–∞—Ç (Server-Sent Events / chunked response)

## üéØ Roadmap

- [ ] –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤)
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –º–∞—Ä—à—Ä—É—Ç–∞—Ö)
- [ ] –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—à–∞—Ä–∏–Ω–≥, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- [ ] AR-–Ω–∞–≤–∏–≥–∞—Ü–∏—è (ARKit/ARCore)
- [ ] Apple Watch / Wear OS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë• –ö–æ–º–∞–Ω–¥–∞

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∏–Ω—Å—Ç–∏—Ç—É—Ç–∞ Web-Agent

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞ support@yanqwip.app
